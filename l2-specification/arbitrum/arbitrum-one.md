# Arbitrum One

## Glossary

- **Assertion**: When a staked Validator proposes or challenges an RBlock on L1.
- **Batch (RBlock)**: A group of zero or more L2 blocks posted into the Batches Storage Contract by the Sequencer.
- **Batches Storage Contract**: Deployed on L1. Stores batch (RBlock) data posted by the Sequencer.
- **Block**: Generated by the Sequencer and contains zero or more executed L2 transactions.
- **Challenge**: When two Validators disagree about the validity of an RBlock assertion.
- **Challenge Contract**: Deployed on L1. Handles the RBlock challenge process and reverts the L2 state posted to the State Transition Contract if the RBlock is invalid.
- **Challenge Period**: Time window of 1 week where an asserted RBlock can be challenged.
- **Sequencer**: Receives L2 transactions from users and generates L2 blocks. Batches L2 blocks and submits the batch data to the Batches Storage Contract.
- **Sequencer Inbox**: Pending transaction pool for L2 transactions.
- **State Transition Contract**: Deployed on L1. Stores L2 state for RBlocks.
- **Validator**: An Arbitrum node that stakes ETH and asserts or challenges RBlocks. 

## Transaction Lifecycle

1. A user submits a transaction to the Sequencer.
2. Sequencer orders the transaction in its off-chain Inbox.
3. Sequencer generates an L2 block by locally executing transactions from its Inbox. 
4. Every few minutes, the Sequencer creates a batch of L2 blocks (RBlock).
5. Sequencer posts the RBlock data to the Batches Storage Contract.
6. A Validator uses the RBlock data posted to the Batches Storage Contract to execute the RBlock and generate the L2 state.
7. Validator asserts the RBlock by posting the L2 state to the State Transition Contract.
8. RBlock challange period begins.
9. A different Validator verifies the RBlock.<br>
    a. Validator queries the Batches Storage Contract for the batch data.<br>
    b. Validator processes the RBlock and generates the L2 state.<br>
    c. Validator checks if the proposed state and generated state match.
10. Validator initiates a challenge if the proposed and generated states differ.
11. RBlock is challenged. Validators interact with the Challenge Contract to resolve the challenge.
12. The Challenge Contract generates the challenge outcome.<br>
    a. If needed, the Challenge Contract reverts the L2 state proposed in the State Transition Contract.
13. After the challenge period ends and all disputes are resolved, the RBlock is confirmed on L1.

## Architecture

![Arbitrum-Architecture drawio](https://github.com/quantstamp/efg-block-explorer-api/assets/118835395/f0d84582-be70-43d2-81c3-17e6742513bd)

## Sequence Diagram

![Arbitrum-Sequence Diagram drawio](https://github.com/quantstamp/efg-block-explorer-api/assets/118835395/73bd4dc4-3bab-4088-b1d6-fd40a28905aa)

## Entity Relationship Diagram

![Arbitrum-Entity Relationship drawio](https://github.com/quantstamp/efg-block-explorer-api/assets/118835395/9952ec70-06df-4b02-9ea5-69ac33baf4da)
